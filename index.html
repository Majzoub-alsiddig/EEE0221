<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet"> <title>Donation Tracker</title>
    <style>:root{--primary-color:#00b8db;--secondary-color:#08a;--text-color:#222;--card-bg:#fff;--progress-bg:#e0e0e0;--progress-fill-start:#00b8db;--progress-fill-end:#107ce8;--marker-color:#fff}body{margin:0;padding:0;font-family:'Tajawal','Segoe UI',Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;display:flex;justify-content:center;align-items:center;background-color:#fff}.background-poster{position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(./logo-w.jpg);filter:blur(5px);background-size:contain;background-repeat:no-repeat;background-position:center center;z-index:-1}.tracker-card{box-shadow:0 0 7px 7px rgba(0,0,0,0.2);border-radius: 10px;display:flex;justify-content:center;align-items:center;flex-direction:column;width:85%;max-width:400px}.tracker-card .logo-img{width:100%;height:auto;max-width:400px;border-radius:10px 10px 0 0;display:block;object-fit:cover;background-color:var(--card-bg);box-shadow:0 10px 30px #0000001a}.tracker-card .container{margin:0;padding:30px 20px;background-color:var(--card-bg);width:100%;max-width:400px;box-sizing:border-box;border-radius:0 0 10px 10px;text-align:center;color:var(--text-color);box-shadow:0 10px 30px #0000001a;border:1px solid #0000000d;font-weight:700;display:flex;flex-direction:column;justify-content:center;border-top:10px solid var(--primary-color)}h1{margin-top:0;font-size:1.8rem;margin-bottom:20px;letter-spacing:0;color:#222}.loader{border:4px solid #0000001a;border-left:4px solid var(--primary-color);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}#main-content{display:none;opacity:0;transition:opacity .5s ease-in}.progress-wrapper{position:relative;width:100%;height:28px;background-color:var(--progress-bg);border-radius:14px;margin:50px 0 35px;direction:ltr;box-shadow:inset 0 2px 4px #0000001a}.progress-fill{height:100%;background:linear-gradient(90deg,var(--progress-fill-start),var(--progress-fill-end));width:0;border-radius:14px;transition:width 1.5s cubic-bezier(0.4,0,0.2,1);box-shadow:0 2px 8px #00b8db66;position:relative;overflow:hidden}.progress-fill::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,#fff3 0%,#fff0 60%);pointer-events:none}.milestone-marker{position:absolute;top:-6px;width:3px;height:40px;background:linear-gradient(to bottom,var(--marker-color),#a09f9f);z-index:2;transform:translateX(-50%);border-radius:2px;box-shadow:0 2px 4px #0003}.milestone-marker::before{content:'★';position:absolute;top:-24px;left:50%;transform:translateX(-50%);color:#f1c40f;font-size:22px;text-shadow:0 2px 4px #0003;filter:drop-shadow(0 2px 2px #0000001a)}.milestone-marker::after{content:attr(data-label);position:absolute;top:-44px;left:50%;transform:translateX(-50%);color:#333;font-size:13px;font-weight:700;background-color:#ffffffe6;padding:2px 6px;border-radius:10px;border:1px solid #0000001a;white-space:nowrap;box-shadow:0 2px 4px #0000000d}.stats-row{display:flex;justify-content:space-between;font-size:1.1rem;margin-bottom:5px;color:#222}.amount-current{color:var(--primary-color);font-size:1.6rem;font-weight:800;text-shadow:none;position:relative;display:inline-block}.amount-current::after{content:'';position:absolute;bottom:-4px;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--primary-color),transparent);border-radius:2px}.last-updated{margin-top:25px;font-size:.85rem;color:#00000080;font-weight:400;font-style:italic}#target-display{color:#666;font-weight:600}@media (max-width: 480px){.tracker-card{width:95%}h1{font-size:1.5rem}.progress-wrapper{height:24px}.milestone-marker::after{font-size:11px;padding:2px 4px}}</style>
</head>
<body>
    <div class="background-poster"></div> <div class="tracker-card"> <img class="logo-img" src="./logo-w.jpg" alt="EEE0221-log"> <div class="container"> <h1>تبرعات كهرباء 0221</h1> <div id="loader" class="loader"></div> <div id="main-content"> <div class="stats-row"> <span>الهدف</span> <span>المبلغ الحالي</span> </div> <div class="stats-row"> <span id="target-display">$0</span> <span id="current-display" class="amount-current">$0</span> </div> <div class="progress-wrapper" id="progress-track"> <div class="progress-fill" id="progress-bar"></div> </div> <p id="last-updated" class="last-updated"></p> </div> </div> </div>
    <script>const DATA_URL="https://script.google.com/macros/s/AKfycbylpsUlu-ZXtQFJo40OJq7QQsnqagl70L86vY4U9NwqQ6WeeJm0nupWMxvmlw-RAOCd/exec";async function initTracker(){try{const t=await fetch(DATA_URL),n=await t.json();console.log(n),document.getElementById("current-display").innerText=formatCurrency(n.current),document.getElementById("target-display").innerText=formatCurrency(n.target),document.getElementById("last-updated").innerText="آخر تحديث: "+n.lastUpdated,document.getElementById("loader").style.display="none";const r=document.getElementById("main-content");r.style.display="block",setTimeout(()=>{r.style.opacity="1"},50);let e=n.current/n.target*100;100<e&&(e=100),setTimeout(()=>{document.getElementById("progress-bar").style.width=e+"%"},100);const o=document.getElementById("progress-track");n.milestones.forEach(e=>{if(0<=e&&e<=100){const t=document.createElement("div");t.classList.add("milestone-marker"),t.style.left=e+"%",t.setAttribute("data-label",e+"%"),o.appendChild(t)}})}catch(e){console.error("Error fetching data:",e),document.getElementById("loader").style.display="none";const a=document.querySelector("h1");a.innerText="Error Loading Data",a.style.color="red"}}function formatCurrency(e){return Number(e).toLocaleString()+"K ج.س"}window.addEventListener("DOMContentLoaded",initTracker);</script>
</body>
</html>
